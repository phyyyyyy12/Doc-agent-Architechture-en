## 🛠 技术演进与思考 (Evolution & Insights)

> "RAG 的胜负手在于数据清洗。解析时多做一分努力，检索时能省十分力气。"

### 📅 项目里程碑

#### **v2.0 - 结构化感知解析器 (Current)** `2026-01-06`

* **核心理念：** 放弃“暴力切分”，转向“语法深度解析”。
* **关键改进：**
* **智能边界：** 引入 `Boundary Protection`，对代码块 (Code Blocks) 和表格 (Tables) 进行强校验，严禁跨行切分。
* **语义注入：** 实现 `Breadcrumb` 策略，每个 Chunk 自动继承父级上下文路径。
* **字段规范：** 统一元数据格式（包含 `source_file`, `breadcrumb`, `heading_level` 等），支持精准的 Metadata Filtering。


* **断舍离：** 明确专注 Markdown 生态，放弃复杂的 RST 支持，追求极致的解析速度与准确度。

#### **v1.0 - 基础切分方案** `2025-12-22`

* **做法：** 固定字符长度切分 (Fixed-size Chunking)。
* **痛点：** 存在严重的语义断裂和上下文丢失问题，导致 Agent 在代码解释场景表现不佳。

---

## ⚖️ 方案对比 (Comparison)

| 特性 | v1.0 暴力切分 | v2.0 结构化感知 (Current) |
| --- | --- | --- |
| **切分依据** | 固定字符数 | **Markdown 标题层级 (# - ###)** |
| **代码完整性** | 经常被截断 | **正则保护，严禁内部切分** |
| **语义背景** | 无 | **Breadcrumb (文件名 > 父标题 > 子标题)** |
| **元数据** | 仅文件名 | **丰富的多维度标签 (Heading/Level/Format)** |
| **检索效果** | 易偏离主题 | **精准定位语义背景** |

---

## 🔮 未来挑战 (Roadmap)

* [ ] **多模态增强：** 针对 Markdown 中嵌套的 **Mermaid** 图表进行语义提取。
* [ ] **复杂公式：** 优化 **LaTeX** 公式的块边界保护。
* [ ] **动态阈值：** 根据内容复杂度自动调整 `max_tokens`。
