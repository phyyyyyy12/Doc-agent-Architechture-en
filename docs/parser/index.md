### ğŸ”„ å½“å‰çŠ¶æ€ï¼šåŸºäº Markdown ç»“æ„çš„æ™ºèƒ½åˆ†å— (Smart Structure-Aware Chunking)

æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š

1.  **åŸºäºæ ‡é¢˜åˆ‡åˆ† (Heading-based)**ï¼š
    * ä»¥ `#` åˆ° `###` ä½œä¸ºè‡ªç„¶è¾¹ç•Œã€‚ä¼˜å…ˆä¿è¯åŒä¸€ä¸ªå°æ ‡é¢˜ä¸‹çš„å†…å®¹å®Œæ•´æ€§ã€‚
2.  **ä¸Šä¸‹æ–‡ç»§æ‰¿ä¸ Breadcrumb (é¢åŒ…å±‘ç­–ç•¥)**ï¼š
    * **å®ç°**ï¼šæ¯ä¸ª Chunk éƒ½ä¼šè‡ªåŠ¨æ³¨å…¥å…¶æ‰€å±çš„æ ‡é¢˜è·¯å¾„ã€‚
    * **ç¤ºä¾‹**ï¼š`[ç”¨æˆ·ä¸­å¿ƒ -> æ¥å£æ–‡æ¡£ -> ç™»å½•æ¥å£]ï¼šè¿™æ˜¯å…·ä½“çš„å‚æ•°è¯´æ˜...`
    * **ä»·å€¼**ï¼šå³ä½¿è¯¥ Chunk è¢«å•ç‹¬æ£€ç´¢å‡ºæ¥ï¼ŒAgent ä¹Ÿèƒ½é€šè¿‡å‰ç¼€ç¬é—´å®šä½å…¶è¯­ä¹‰èƒŒæ™¯ã€‚
3.  **å—è¾¹ç•Œä¿æŠ¤ (Boundary Protection)**ï¼š
    * **ä»£ç å—ä¿æŠ¤**ï¼šæ­£åˆ™è¯†åˆ« ` ``` ` ç¬¦å·ï¼Œä¸¥ç¦åœ¨ä»£ç å—å†…éƒ¨åˆ‡åˆ†ï¼Œä¿è¯ä»£ç é€»è¾‘å®Œæ•´ã€‚
    * **è¡¨æ ¼ä¿æŠ¤**ï¼šè¯†åˆ« Markdown è¡¨æ ¼ç»“æ„ï¼Œç¡®ä¿ä¸€è¡Œæ•°æ®ä¸è¢«æ‹†åˆ†åˆ°ä¸¤ä¸ª Chunk ä¸­ã€‚
4.  **å…ƒæ•°æ®ä¸°å¯ŒåŒ– (Metadata Enrichment)**ï¼š
    * æ¯ä¸ª Chunk è‡ªåŠ¨æºå¸¦ï¼šsource_fileï¼ˆæºæ–‡ä»¶è·¯å¾„ï¼‰ã€breadcrumbï¼ˆæ ‡é¢˜è·¯å¾„ï¼Œæ ¼å¼ï¼šæ–‡ä»¶å > çˆ¶æ ‡é¢˜ > å­æ ‡é¢˜ï¼‰ã€parent_headerï¼ˆçˆ¶çº§æ ‡é¢˜è·¯å¾„ï¼‰ã€headingï¼ˆå½“å‰æ ‡é¢˜ï¼‰ã€heading_levelï¼ˆæ ‡é¢˜å±‚çº§ï¼Œ1-6ï¼‰ã€formatï¼ˆæ–‡ä»¶æ ¼å¼ï¼‰ã€inherited_headingï¼ˆæ˜¯å¦ç»§æ‰¿æ ‡é¢˜ï¼‰ç­‰æ ‡ç­¾ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œå…ƒæ•°æ®è¿‡æ»¤ã€‚
